############################################################
# Dockerfile to build an example API endpoint
# Based on: alpine:latest
# DATE: 09/28/2017
# COPYRIGHT: awsdocs.com
############################################################

# Set the base image
FROM alpine:latest

# File Author / Maintainer
MAINTAINER "Rich Nason" <rnason@awsdocs.com>

###################################################################
#***************  OVERRIDE ENABLED ENV VARIABLES  *****************
###################################################################


###################################################################
#*******************  UPDATES & PRE-REQS  *************************
###################################################################

# Install dependencies
RUN apk update && apk add curl python py-pip jq vim

# Install bottle if running the python file directly
RUN pip install bottle

###################################################################
#*******************  APPLICATION INSTALL  ************************
###################################################################


###################################################################
#*****************  CONFIGURE START ITEMS  ************************
###################################################################


###################################################################
#******************  ADD REQUIRED APP FILES  **********************
###################################################################

ADD simpleAPI.py /usr/local/bin

###################################################################
#*************  CMD & EXPOSE APPLICATION PORTS  *******************
###################################################################

CMD [ "sh", "-c", "python /root/api.py" ]

EXPOSE 80
